{"version":3,"sources":["webpack:///./src/views/clock/clock.vue?765d","webpack:///./src/views/clock/clock.vue","webpack:///./src/views/clock/point.js","webpack:///src/views/clock/clock.vue","webpack:///./src/views/clock/clock.vue?af7e","webpack:///./src/views/clock/clock.vue?53c2"],"names":["render","_vm","this","_c","_self","ref","staticClass","staticRenderFns","Point","constructor","ctx","cx","window","innerWidth","cy","innerHeight","deg","getRandom","Math","PI","r","min","ox","x","cos","oy","y","sin","radius","max","random","draw","beginPath","arc","fill","moveTo","consume","start","Date","now","sx","sy","_move","dis","requestAnimationFrame","name","data","timeStr","toTimeString","substring","pos","points","props","methods","updateSize","$refs","canvas","width","height","drawTime","clearRect","font","fillStyle","fillText","measureText","getImgData","getImageData","w","arr","i","j","ind","g","b","a","push","_draw","forEach","p","update","_update","splice","length","mounted","getContext","willReadFrequently","component"],"mappings":"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","file":"js/canvas.c76b513b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./clock.vue?vue&type=style&index=0&id=637a899b&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('canvas',{ref:\"canvas\",staticClass:\"clock\"})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","class Point {\r\n  constructor(ctx) {\r\n    this.ctx = ctx;\r\n    this.cx = window.innerWidth / 2;\r\n    this.cy = window.innerHeight / 2;\r\n    this.deg = (this.getRandom(0, 360) / 180) * Math.PI;\r\n    this.r = Math.min(this.cx, this.cy);\r\n    this.ox = this.x = this.cx + this.r * Math.cos(this.deg);\r\n    this.oy = this.y = this.cy - this.cy * Math.sin(this.deg);\r\n    this.radius = this.getRandom(2, 5);\r\n  }\r\n\r\n  getRandom(min, max) {\r\n    return min + (max - min) * Math.random();\r\n  }\r\n\r\n  draw() {\r\n    this.ctx.beginPath();\r\n    this.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\r\n    this.ctx.fill();\r\n  }\r\n\r\n  moveTo(x, y) {\r\n    const consume = 200;\r\n    const start = +Date.now();\r\n    const sx = -(this.x - x) / consume;\r\n    const sy = -(this.y - y) / consume;\r\n    const _move = () => {\r\n      const now = +Date.now();\r\n      const dis = now - start;\r\n      if (dis >= consume) {\r\n        this.ox = this.x = x;\r\n        this.oy = this.y = y;\r\n        return;\r\n      }\r\n      this.x = sx * dis + this.ox;\r\n      this.y = sy * dis + this.oy;\r\n\r\n      requestAnimationFrame(_move);\r\n    };\r\n    _move();\r\n  }\r\n}\r\n\r\nexport default Point;\r\n","<template>\r\n  <canvas class=\"clock\" ref=\"canvas\"></canvas>\r\n</template>\r\n\r\n<script>\r\nimport Point from \"./point\";\r\nexport default {\r\n  name: \"clock\",\r\n  data() {\r\n    return {\r\n      ctx: null,\r\n      timeStr: new Date().toTimeString().substring(0, 8),\r\n      pos: [],\r\n      points: [],\r\n    };\r\n  },\r\n  props: {},\r\n  methods: {\r\n    updateSize() {\r\n      this.$refs.canvas.width = window.innerWidth;\r\n      this.$refs.canvas.height = window.innerHeight;\r\n    },\r\n    drawTime() {\r\n      const timeStr = new Date().toTimeString().substring(0, 8);\r\n      //   if (timeStr === this.timeStr) return this.pos;\r\n      this.ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\r\n      this.timeStr = timeStr;\r\n      this.ctx.font = \"120px serif\";\r\n      this.ctx.fillStyle = \"#000\";\r\n      this.ctx.fillText(\r\n        this.timeStr,\r\n        (window.innerWidth - this.ctx.measureText(this.timeStr).width) / 2,\r\n        window.innerHeight / 2\r\n      );\r\n      this.pos = this.getImgData();\r\n    },\r\n    getImgData() {\r\n      const data = this.ctx.getImageData(\r\n        0,\r\n        0,\r\n        window.innerWidth,\r\n        window.innerHeight\r\n      ).data;\r\n      const w = window.innerWidth;\r\n      const arr = [];\r\n      for (let i = 0; i < w; i += 2) {\r\n        for (let j = 0; j < window.innerHeight; j++) {\r\n          const ind = 4 * (j * w + i);\r\n          const r = data[ind];\r\n          const g = data[ind + 1];\r\n          const b = data[ind + 2];\r\n          const a = data[ind + 3];\r\n          if (r === 0 && b === 0 && g === 0 && a === 255) {\r\n            arr.push([i, j]);\r\n          }\r\n        }\r\n      }\r\n      this.ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\r\n      return arr;\r\n    },\r\n    draw() {\r\n      const _draw = () => {\r\n        this.ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\r\n        this.points.forEach((p) => {\r\n          p.draw();\r\n        });\r\n        requestAnimationFrame(_draw);\r\n      };\r\n      _draw();\r\n    },\r\n    update() {\r\n      const _update = () => {\r\n        if (new Date().toTimeString().substring(0, 8) === this.timeStr)\r\n          return requestAnimationFrame(_update);\r\n        this.drawTime();\r\n        this.pos.forEach(([x, y], i) => {\r\n          let p = this.points[i];\r\n          if (!p) {\r\n            p = new Point(this.ctx);\r\n            this.points[i] = p;\r\n          }\r\n          p.moveTo(x, y);\r\n        });\r\n        this.points.splice(this.pos.length);\r\n        requestAnimationFrame(_update);\r\n      };\r\n      _update();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.updateSize();\r\n    this.ctx = this.$refs.canvas.getContext(\"2d\", { willReadFrequently: true });\r\n    this.update();\r\n    this.draw();\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"less\">\r\n.clock {\r\n  position: fixed;\r\n  background: radial-gradient(rgb(216, 152, 57), rgb(68, 58, 4));\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./clock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./clock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./clock.vue?vue&type=template&id=637a899b&\"\nimport script from \"./clock.vue?vue&type=script&lang=js&\"\nexport * from \"./clock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./clock.vue?vue&type=style&index=0&id=637a899b&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}